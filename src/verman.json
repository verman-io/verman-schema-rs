{
  "name": "verman-schema-rs",
  "version": "0.0.1",
  "license": "(Apache-2.0 OR MIT)",
  "homepage": "https://verman.io",
  "repo": "https://github.com/verman-io",
  "authors": [
    ""
  ],
  "stack": {
    "database": [
      {
        "kind": "sql",
        "versions": null,
        "server_priority": null
      }
    ],
    "application_server": [
      {
        "kind": "python",
        "versions": [
          "~2.7",
          "~3.6",
          "~3.13"
        ],
        "server_priority": [
          "Waitress",
          "mod_wsgi",
          "uvicorn"
        ]
      },
      {
        "kind": "ruby",
        "versions": null,
        "server_priority": null
      }
    ]
  },
  "stack_state": {
    "database": {
      "kind": "sql",
      "install": "always",
      "remove": null,
      "start": "always",
      "stop": null
    },
    "application_server": {
      "kind": null,
      "install": "always",
      "remove": null,
      "start": "always",
      "stop": null
    },
    "routing": {
      "kind": null,
      "install": "always",
      "remove": null,
      "start": "always",
      "stop": null
    }
  },
  "stack_routing": [
    {
      "name": "my_name.verman.io",
      "protocol": "https",
      "certificate_vendor": "LetsEncrypt"
    }
  ],
  "component": [
    {
      "src_uri": "file://python_api_folder/",
      "dst_uri": "http://localhost:${env.PYTHON_API_PORT}",
      "constraints": [
        {
          "kind": "lang",
          "required_variant": "python",
          "required_version": null
        },
        {
          "kind": "OS",
          "required_variant": null,
          "required_version": null
        }
      ],
      "vendor": null,
      "mounts": null
    },
    {
      "src_uri": "file://ruby_api_folder/",
      "dst_uri": {
        "if": "OS == \"windows\"",
        "then": "\"\\\\.\\pipe\\PipeName\"",
        "else": "\"unix:///var/run/my-socket.sock\""
      },
      "constraints": [
        {
          "kind": "lang",
          "required_variant": "ruby",
          "required_version": ">3.1.2, <3.2"
        },
        {
          "kind": "OS",
          "required_variant": "${\"linux\" || \"windows\"}",
          "required_version": null
        }
      ],
      "vendor": null,
      "mounts": null
    },
    {
      "src_uri": null,
      "dst_uri": "my_app.verman.io",
      "constraints": [
        {
          "kind": "routing",
          "required_variant": null,
          "required_version": null
        }
      ],
      "vendor": {
        "nginx": {
          "windows": {
            "kind": "server_block",
            "uri": "file://win_nginx.site_avail.conf"
          },
          "linux": {
            "kind": "server_block",
            "uri": "file://nginx.site_avail.conf"
          }
        }
      },
      "mounts": {
        "/api/py": {
          "kind": "python",
          "uri": "${stack.components[.kind==\"python\"].dst_uri}"
        },
        "/api/ruby": {
          "kind": "ruby",
          "uri": "${stack.components[.kind==\"ruby\"].dst_uri}"
        },
        "/": {
          "kind": "static",
          "uri": "file://${env.WWWROOT}"
        }
      }
    }
  ]
}